<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>MCP JSON-RPC Client</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }
        textarea { width: 100%; height: 200px; }
        #response { background: #f4f4f4; border: 1px solid #ddd; padding: 10px; white-space: pre-wrap; }
    </style>
</head>
<body>
    <h1>MCP JSON-RPC Request Builder</h1>

    <h2>Request</h2>
    <textarea id="request" placeholder='Enter JSON-RPC request (e.g., {
    "jsonrpc": "2.0",
    "method": "some_method",
    "params": {},
    "id": 1
})'></textarea>

    <button onclick="sendRequest()">Send Request</button>

    <h2>Response</h2>
    <div id="response">Response will appear here</div>

    <script>
        async function sendRequest() {
            const requestTextArea = document.getElementById('request');
            const responseDiv = document.getElementById('response');

            try {
                // Validate JSON first
                const jsonRpcRequest = JSON.parse(requestTextArea.value);

                const response = await fetch('/jsonrpc', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: requestTextArea.value
                });

                const jsonResponse = await response.json();
                responseDiv.textContent = JSON.stringify(jsonResponse, null, 2);
            } catch (error) {
                responseDiv.textContent = `Error: ${error.message}`;
            }
        }
    </script>
</body>
</html>